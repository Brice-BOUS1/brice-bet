<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRICE-BET PRO | L'Oracle StratÃ©gique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/dist/css/all.min.css">

    <!-- ðŸ”´ ANCIEN CODE : STYLE -->
    <style>
        :root { 
            --primary: #00ff88; 
            --bg: #0a0e14; 
            --card: #161b22; 
            --text: #ffffff; 
            --accent: #238636; 
        }
        body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI'; margin: 0; }
        header { padding: 1.5rem; text-align: center; color: var(--primary); background: #0d1117; }
        .container { width: 98%; max-width: 1300px; display: grid; grid-template-columns: 1fr 350px; gap: 15px; margin: 20px auto; }
        .chat-section { background: var(--card); padding: 20px; border-radius: 12px; }
        #chat-box { height: 550px; overflow-y: auto; }
        .msg { padding: 12px 18px; border-radius: 10px; }
        .user-msg { background: var(--accent); text-align: right; }
        .ai-msg { background: #1c2128; border-left: 4px solid var(--primary); white-space: pre-wrap; }
        .input-area { display: flex; gap: 10px; padding: 15px; }
        input { flex: 1; padding: 12px; background: #0a0e14; color: white; border: 1px solid #333; }
        button { background: var(--primary); border: none; padding: 10px 25px; cursor: pointer; }
    </style>
</head>

<body>

<header>
    <h1>ðŸ¤– BRICE-BET PRO</h1>
    <p>Analyse Expert : StratÃ©gies & Pronostics</p>
</header>

<div class="container">
    <div class="chat-section">
        <div id="chat-box">
            <div class="msg ai-msg">
Bonjour ! Je suis l'Oracle Brice-Bet PRO.
Quel match voulez-vous analyser ?
            </div>
        </div>

        <div class="input-area">
            <input id="user-input" placeholder="Analyse Arsenal vs Sunderland">
            <button onclick="askOracle()">ANALYSER</button>
        </div>
    </div>
</div>

<script>
/* ======================================================
   ðŸŸ¢ NOUVEAU CODE â€” MOTEUR Dâ€™ALGORITHMES DE CALCUL
   ====================================================== */

// GÃ©nÃ©rateur pondÃ©rÃ© (rÃ©aliste)
function weightedRandom(min, max, power = 1) {
    return min + Math.pow(Math.random(), power) * (max - min);
}

// Simulation de forme sur 5 matchs
function simulateTeamForm() {
    let games = [];
    for (let i = 0; i < 5; i++) {
        games.push({
            goalsFor: Math.round(weightedRandom(0, 4, 0.7)),
            goalsAgainst: Math.round(weightedRandom(0, 3, 0.9)),
            corners: Math.round(weightedRandom(3, 10, 0.8)),
            fouls: Math.round(weightedRandom(8, 18, 1.1)),
            shotsOnTarget: Math.round(weightedRandom(2, 7, 0.8))
        });
    }
    return games;
}

// Score de forme
function calculateForm(matches) {
    let score = 0;
    matches.forEach(m => {
        score += m.goalsFor * 2;
        score -= m.goalsAgainst * 1.5;
        score += m.shotsOnTarget * 0.5;
    });
    return Math.max(score, 1);
}

// ProbabilitÃ©s
function calculateProbabilities(a, b) {
    const total = a + b;
    return {
        A: Math.round((a / total) * 100),
        B: Math.round((b / total) * 100)
    };
}

// Analyse complÃ¨te
function analyzeMatch(teamA, teamB) {
    const formA = calculateForm(simulateTeamForm());
    const formB = calculateForm(simulateTeamForm());
    const probs = calculateProbabilities(formA, formB);

    return {
        teamA,
        teamB,
        formA,
        formB,
        probs,
        expectedGoals: Math.round(weightedRandom(2, 4, 0.7)),
        expectedCorners: Math.round(weightedRandom(8, 13, 0.8)),
        riskIndex: Math.round(weightedRandom(1, 10, 1.2))
    };
}

/* ======================================================
   ðŸ”´ ANCIEN CODE â€” FONCTION PRINCIPALE
   (ENRICHIE PAR LES ALGORITHMES)
   ====================================================== */

async function askOracle() {
    const input = document.getElementById("user-input");
    const chatBox = document.getElementById("chat-box");
    if (!input.value) return;

    const question = input.value;
    chatBox.innerHTML += `<div class="msg user-msg">${question}</div>`;

    // ðŸŸ¢ NOUVEAU : extraction Ã©quipes + calcul
    const teams = question.split("vs").map(t => t.trim());
    let algo = teams.length === 2 ? analyzeMatch(teams[0], teams[1]) : null;

    chatBox.innerHTML += `<div class="msg ai-msg">
ðŸ“Š ANALYSE ALGORITHMIQUE INTERNE

${algo ? `
â€¢ Forme ${algo.teamA} : ${algo.formA}
â€¢ Forme ${algo.teamB} : ${algo.formB}
â€¢ ProbabilitÃ© ${algo.teamA} : ${algo.probs.A}%
â€¢ ProbabilitÃ© ${algo.teamB} : ${algo.probs.B}%
â€¢ Buts attendus : ${algo.expectedGoals}
â€¢ Corners attendus : ${algo.expectedCorners}
â€¢ Indice de risque : ${algo.riskIndex}/10
` : "Analyse impossible (format invalide)"}
    </div>`;

    input.value = "";
}
</script>

</body>
</html>
